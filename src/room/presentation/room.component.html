<div class="mb-16">
  <div class="flex items-center border-b-1 pb-5 border-gray-300 justify-center">
    <h1 class="font-bold text-4xl place-self-center text-cyan-700" data-testid="room-name">
      {{ roomStore.room()?.name }}
    </h1>
    <!--
    <button
      class="hover:shadow-gray-700 hover:cursor-pointer bg-gray-50 shadow-sm ml-1 text-cyan-700 flex items-center justify-center p-0.5 rounded-full self-center"
      data-testid="add-expense"
    >
      <span class="material-icons" style="font-size: 14px">edit</span>
    </button>
    <button
      class="hover:shadow-gray-700 hover:cursor-pointer bg-gray-50 shadow-sm ml-1 text-cyan-700 flex items-center justify-center p-0.5 rounded-full"
      data-testid="add-expense"
    >
      <span class="material-icons" style="font-size: 14px">delete</span>
    </button>
  --></div>
  @for (payer of roomStore.room()?.payers; track payer.id) {
  <app-payer [payer]="payer"></app-payer>
  }
  <div class="p-2 mt-4 bg-amber-50 rounded-sm text-center" data-testid="balance">
    <span class="place-self-center text-3xl flex font-bold">Balance</span>
    <div class="flex justify-around text-xs mt-2 border-gray-300">
      <span
        >total :
        <span
          class="text-amber-700 font-semibold text-lg"
          class="text-amber-700 font-bold text-base"
          >{{ roomStore.room()?.calculateTotalExpenses() | amount }}</span
        ></span
      >
      <span
        >average :
        <span
          class="text-amber-700 font-semibold text-lg"
          class="text-amber-700 font-bold text-base"
          >{{ roomStore.room()?.calculateAverageExpensesPerPayer() | amount }}</span
        ></span
      >
    </div>
    <div class="mt-2">
      <table>
        <thead>
          <tr class="bg-gray-200">
            <th class="p-1 w-2/5 border-1 border-gray-300">From</th>
            <th class="p-1 border-1 border-gray-300">Amount</th>
            <th class="p-1 w-2/5 border-1 border-gray-300">To</th>
          </tr>
        </thead>
        <tbody>
          @for (payment of roomStore.room()?.calculateBalance()?.payments; track $index) {
          <tr [ngClass]="$index % 2 === 0 ? 'bg-white' : 'bg-gray-50'">
            <td class="font-semibold text-cyan-700 border-1 border-gray-300 p-1">
              {{ payment.from }}
            </td>
            <td class="font-semibold text-amber-700 border-1 border-gray-300 p-1">
              {{ payment.amount | amount }}
            </td>
            <td class="font-semibold text-cyan-700 border-1 border-gray-300 p-1">
              {{ payment.to }}
            </td>
          </tr>
          }
        </tbody>
      </table>
    </div>
  </div>

  <div
    class="p-2.5 rounded-sm fixed bottom-2 bg-white left-2 right-2 flex justify-between shadow-sm shadow-gray-700"
  >
    <input
      type="text"
      placeholder="new payer name"
      [(ngModel)]="payerName"
      data-testid="payer-name"
      class="focus:border-cyan-700 hover:bg-gray-100 placeholder:text-gray-400 outline-none border-1 p-2 rounded-sm border-gray-300 bg-gray-50"
    />
    <button
      class="hover:bg-cyan-700 hover:cursor-pointer rounded-2xl px-5 py-1.5 ml-2 bg-cyan-600 text-white font-bold"
      data-testid="add-payer"
      (click)="addPayer()"
    >
      Add
    </button>
  </div>
</div>
